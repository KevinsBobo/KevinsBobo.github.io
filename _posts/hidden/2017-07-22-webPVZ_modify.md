---
title: 修改日志
comments: true
verifid: 2017072201
layout: default
category: hidden
---


> 注：标题后的代码为`git commit`记录ID

## 2017.7.22 - 修改Bug - `c4efbf`

- 一键通关时在D盘创建了一个`users.dat`文件

    - 原因：设置文件路径时，直接用文件名覆盖了整个路径

    - 修改：使用拼接的方法得到完整路径

## 2017.7.22 - 完成扫描房间功能 - `7537d7`

- 通过`WinPcap`库向局域网内所有IP的`27175`端口（植物方进入我是僵尸无尽版之后绑定的`SOCKET`端口）发送`TCP SYN`包，然后监听网卡数据，如果收到某IP的`SYN + ACK`包，说明该IP有一个游戏房间，则显示该IP

## 2017.7.20 - 增加一键设置通关存档 增加安装WinPcap选项 修改UI准备扫描房间选项 - `a7b192`

- 调整了UI结构

- 为启动器设置了UAC权限

- 完成一键设置通关文档

- 在目标主机没有安装WinPcap依赖包的情况下，可通过按钮安装（启动WinPcap安装程序，用户仍然需要手动安装）

## 2017.7.6 - 修改Bug - `20d298`

- IP写文件Bug：仅在起动器打开时向文件写入了第一张网卡的IP地址，随后选择网卡切换IP或手动切换IP无效。

    - 原因：写文件函数调用位置错误，误将其写在了`Dialog OnInitDialog()`函数中

    - 修改：将调用写文件函数放置在`启动`按钮的事件函数中

## 2017.7.5 - 增加选择IP - `25ba49`

- 所有新增代码在工程代码中都以`/* 选择IP新增 start */ ... /* 选择IP新增 end */`的注释方式标注

- 对`WpdPack`的修改：在文件`Include/pcap-stdinc.h`中注释了第69行`// #define inline __inline `

- 小问题：原工程使用`vs2015`编写的，项目属性需要进行修改

- 植物方为服务器端，`IP`默认为`0.0.0.0`，不需要根据网卡选择`IP`

- 僵尸方为客户端，需要根据网卡选择`IP`，且需要等待植物方进入`我是僵尸无尽版`之后才能进入该模式，否则连接不成功

- 发现的警告：一个结构体里有一个这样的数据成员`char szBuff[0];`，警告其不符合规范

- 发现的Bug：

    - 种植植物显示错位

    - 部分僵尸不能投放

    - 植物状态无存档，继续游戏时只剩下僵尸
