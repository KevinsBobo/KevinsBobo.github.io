---
title: 做一个省时省力还能帮助排错的C/C++的头文件
comments: true
verifid: 2017042501
layout: default
category: 偷懒必须先勤快
---

## 想法

> 通过宏定义、单例对象等方法减少代码量、打印程序信息、统计```对象; new; delete; malloc(); free();```次数而便于分析代码错误<br><br>该头文件是用于```Debug```版下编译的```Release```版就算包含了该头文件，并且使用头文件中的内容也是无效的

纯C内容：

1. 宏定义输入输出重定向到文件和关闭文件，可以减少至少3行代码量

2. 宏定义```printf()```用于打印程序执行结果，省掉不必要的格式输入

3. 宏定义```malloc(); free();```次数统计

C++内容：

1. 创建命名空间防止命名冲突

2. 宏定义```new; delete;```次数统计

3. 创建单例类，用于统计和输出程序信息

4. 在单例类构造中记录时间并在需要的情况下重定向输入输出，析构中计算程序运行时间并输出、输出构造的对象数量和```new; delete; malloc(); free();```次数

5. 宏定义单例对象创建语句，省去输入命名空间的时间，在出```main()```时自动析构并打印相关信息

额外要求：

1. 严格区分```Debug```调试版和```Release```版

2. 能够从项目中安全、简单地移除而不引发编译错误

## 效果

> 文件中涉及到比较多的个人信息，所以就不贴代码了 ^_^

![](/assets/img/my_header_file_output.png)
